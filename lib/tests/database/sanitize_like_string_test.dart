<converted Dart code from above>
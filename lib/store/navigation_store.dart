[Dart code from the conversion above]